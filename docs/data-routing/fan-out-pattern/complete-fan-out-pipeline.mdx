---
title: Complete Fan-Out Pipeline
sidebar_label: Complete Pipeline
sidebar_position: 9
description: The complete fan-out pipeline sending to multiple destinations
keywords: [complete, fan-out, multi-destination, broker]
---

import CodeBlock from '@theme/CodeBlock';
import pipelineYaml from '!!raw-loader!../../../examples/data-routing/fan-out-pattern.yaml';
import CopyPipelineButton from '@site/src/components/CopyPipelineButton';

# Complete Pipeline

<CopyPipelineButton pipeline={pipelineYaml} />

This pipeline combines all fan-out techniques from this tutorial:

- **Multi-destination output** - Send every event to multiple destinations simultaneously
- **Broker pattern** - Use `fan_out` to duplicate messages to each output
- **Destination-specific config** - Configure batching, compression per destination

## Full Configuration

<CodeBlock language="yaml" title="fan-out-pattern.yaml">{pipelineYaml}</CodeBlock>

## Quick Test

```bash
# Send an event (goes to all configured destinations)
curl -X POST http://localhost:8080/events \
  -H "Content-Type: application/json" \
  -d '{
    "sensor_id": "temp-001",
    "temperature": 72.5,
    "humidity": 45,
    "timestamp": "2024-01-15T10:30:00Z"
  }'
```

## Deploy

```bash
# Deploy to Expanso orchestrator
expanso-cli job deploy fan-out-pattern.yaml

# Or run locally with expanso-edge
expanso-edge run --config fan-out-pattern.yaml
```

## Download

<a href="/examples/data-routing/fan-out-pattern.yaml" download className="button button--primary">
  Download fan-out-pattern.yaml
</a>

## What's Next?

- [Troubleshooting](./troubleshooting) - Common issues and solutions
- [Content Splitting](../content-splitting/) - Split arrays into individual messages
