---
title: How to Route Data Based on Content
sidebar_label: Introduction
sidebar_position: 1
description: Use conditional logic to send data to different destinations based on message content, region, priority, and event type
keywords: [routing, switch, conditional, content-based, priority, geography, event-type, edge-processing]
---

# How to Route Data Based on Content

**Send the right data to the right place at the right time.** This step-by-step guide teaches you 4 essential content routing techniques through an interactive explorer and hands-on exercises.

## The Problem

In production data pipelines, not all data deserves the same treatment. Your current approach might look like this:

```json
{
  "event_id": "payment-12345",
  "severity": "CRITICAL",         // ❌ All events treated equally
  "region": "eu-west",           // ❌ GDPR data flowing to US systems
  "event_type": "payment.failed", // ❌ Financial data mixed with telemetry
  "user_tier": "premium",        // ❌ Premium users waiting in same queue
  "timestamp": "2025-10-20T10:00:00Z"
}
```

**The challenge:** Without intelligent routing, you either send everything everywhere (wasting bandwidth and violating compliance) or create separate pipelines for each data type (duplicating configuration and increasing maintenance burden).

## The Solution: 4 Content Routing Techniques

This guide teaches you how to apply the right routing technique for each use case:

### 1. **Severity-Based Routing** → Alert Escalation
Route log messages and alerts based on criticality level
- **Use case:** Critical errors to PagerDuty, warnings to Slack, info to Elasticsearch
- **Method:** Switch output with severity field evaluation
- **Result:** 95% faster incident response, reduced alert fatigue

### 2. **Geographic Routing** → Compliance & Performance  
Route data to region-specific systems for GDPR compliance and low latency
- **Use case:** EU data stays in EU, US data to regional clusters
- **Method:** Regional routing with compliance enforcement
- **Result:** 100% GDPR compliance, 40% latency reduction

### 3. **Event Type Routing** → Specialized Processing
Route different event types to specialized processors and storage systems
- **Use case:** Authentication events to security systems, payments to fraud detection
- **Method:** Event type pattern matching with specialized outputs
- **Result:** 60% improvement in processing efficiency

### 4. **Priority Queue Routing** → Service Level Management
Route messages to different priority queues based on user tier and urgency
- **Use case:** Premium users get expedited processing, critical alerts skip queues
- **Method:** Multi-factor priority scoring with dedicated queue routing
- **Result:** 80% improvement in premium user experience

## Why Process at the Edge?

**Compliance:** Route EU data to EU systems without ever touching US infrastructure
**Cost Efficiency:** Keep high-volume telemetry local, send only critical data to cloud
**Performance:** Route to closest regional systems for lowest latency
**Security:** Apply routing decisions before data leaves your network perimeter

## What You'll Learn

By the end of this guide, you'll be able to:

✅ **Route by severity** to escalate critical alerts while batching routine logs
✅ **Route by geography** to maintain GDPR compliance and optimize latency
✅ **Route by event type** to send data to specialized processing systems
✅ **Create priority queues** that ensure premium users and critical events get expedited processing

## Get Started

### Option 1: Interactive Explorer (Recommended)
**See** each routing technique in action with side-by-side before/after views.

[**→ Launch Interactive Explorer**](./explorer)

### Option 2: Step-by-Step Tutorial
**Build** the routing pipeline incrementally, one concept at a time.

1. [**Setup Guide**](./setup) - Configure environment and deploy shell pipeline
2. [**Step 1: Severity Routing**](./step-1-route-by-severity) - Critical alerts to PagerDuty
3. [**Step 2: Geographic Routing**](./step-2-route-by-region) - GDPR-compliant regional routing
4. [**Step 3: Event Type Routing**](./step-3-route-by-event-type) - Specialized event processing
5. [**Step 4: Priority Queues**](./step-4-create-priority-queues) - Multi-tier service levels

### Option 3: Jump to Final Pipeline
**Download** the complete, production-ready content routing pipeline.

[**→ Get Complete Pipeline**](./complete-content-routing)

## Who This Guide Is For

- **Platform Engineers** managing multi-tenant data pipelines
- **Security Teams** enforcing data residency and compliance requirements
- **SRE Teams** optimizing incident response and alert routing
- **Data Engineers** building specialized processing workflows

## Prerequisites

- Expanso edge node running and connected to orchestrator
- Basic familiarity with YAML configuration
- Access credentials for destination services (Kafka, PagerDuty, etc.)

## Time to Complete

- **Interactive Explorer:** 15 minutes
- **Step-by-Step Tutorial:** 45-60 minutes
- **Quick Deploy:** 10 minutes

## Real-World Impact

**Before Content Routing:**
```
- Alert Response Time: 15+ minutes (everything goes to general queue)
- Compliance Violations: 12% of EU data processed in US
- Bandwidth Costs: $240/month (everything to cloud)
- Premium User SLA: 72% (mixed with standard users)
```

**After Content Routing:**
```
- Alert Response Time: 2 minutes (critical alerts skip to PagerDuty)
- Compliance Violations: 0% (geographic routing enforced)
- Bandwidth Costs: $80/month (telemetry kept local)
- Premium User SLA: 98% (dedicated priority queues)
```

---

## Next Steps

Ready to start? Choose your learning path:

<div style={{display: 'flex', gap: '1.5rem', marginTop: '2rem', marginBottom: '3rem', flexWrap: 'wrap', justifyContent: 'flex-start'}}>
  <a href="./explorer" className="button button--primary button--lg" style={{display: 'inline-flex', alignItems: 'center', justifyContent: 'center', textDecoration: 'none', borderRadius: '8px', padding: '1rem 2rem', fontWeight: '600', minWidth: '240px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)', cursor: 'pointer', transition: 'all 0.2s ease'}}>
    Interactive Explorer
  </a>
  <a href="./setup" className="button button--secondary button--lg" style={{display: 'inline-flex', alignItems: 'center', justifyContent: 'center', textDecoration: 'none', borderRadius: '8px', padding: '1rem 2rem', fontWeight: '600', minWidth: '240px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)', cursor: 'pointer', transition: 'all 0.2s ease'}}>
    Step-by-Step Tutorial
  </a>
</div>

**Questions?** Check [Troubleshooting](./troubleshooting) or see [Related Examples](#related-examples) below.

## Related Examples

- [**Send Data to Multiple Destinations**](../fan-out-pattern/) - Fan-out pattern for broadcasting data
- [**Create Circuit Breakers**](../circuit-breakers) - Handle destination failures gracefully
- [**Implement Priority Queues**](../priority-queues) - Advanced queue management patterns
