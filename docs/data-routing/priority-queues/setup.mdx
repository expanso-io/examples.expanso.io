---
title: Setup Environment for Priority Queues
sidebar_label: Setup
sidebar_position: 3
description: Configure environment variables and Kafka brokers for a priority queue pipeline.
keywords: [setup, environment, configuration, deployment, kafka, priority-queues]
---

# Setup Environment for Priority Queues

Before building the priority queue system, you'll set up your Kafka environment and configure routing credentials.

## Prerequisites

This example requires the following services to be running:

*   **[Kafka](/getting-started/services/kafka)**

Before you begin, please ensure these services are set up and running according to their respective guides. Additionally, ensure you have completed the [Local Development Setup](/getting-started/local-development) guide for general environment configuration.

## Step 1: Configure Example-Specific Variables

After setting up the core services, configure priority queue-specific variables:

```bash
# Set edge node identifier for tracking
export NODE_ID="edge-node-01"

# Verify environment variables
echo "Kafka Brokers: $KAFKA_BROKERS"
echo "Node ID: $NODE_ID"
```

## Step 2: Verify Priority Topics

Before proceeding, verify all required priority topics exist and are accessible:

```bash
# Run this verification script
for topic in critical high normal low; do
  echo "Testing topic: logs-$topic"
  
  # Test producer
  echo '{"test": "message", "topic": "logs-'$topic'"}' | \
    $KAFKA_HOME/bin/kafka-console-producer.sh \
      --bootstrap-server $KAFKA_BROKERS \
      --topic logs-$topic
  
  # Test consumer (read the test message back)
  timeout 5s $KAFKA_HOME/bin/kafka-console-consumer.sh \
    --bootstrap-server $KAFKA_BROKERS \
    --topic logs-$topic \
    --from-beginning \
    --max-messages 1
  
  echo "✅ Topic logs-$topic is accessible"
  echo
done
```

## Next Steps

With your environment configured, you're ready to implement priority-based routing:

<div style={{display: 'flex', gap: '1.5rem', marginTop: '2rem', marginBottom: '3rem', flexWrap: 'wrap', justifyContent: 'flex-start'}}>
  <a href="./step-1-severity-routing" className="button button--primary button--lg" style={{display: 'inline-flex', alignItems: 'center', justifyContent: 'center', textDecoration: 'none', borderRadius: '8px', padding: '1rem 2rem', fontWeight: '600', minWidth: '240px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)', cursor: 'pointer', transition: 'all 0.2s ease'}}>
    Step 1: Severity Routing
  </a>
</div>

## What's Next

- **Step 1:** Replace shell pipeline with severity-based routing (CRITICAL → immediate, INFO → batched)
- **Step 2:** Add customer tier prioritization (enterprise → dedicated queue, free → bulk processing)  
- **Step 3:** Implement multi-criteria scoring combining severity, tier, and event type
- **Step 4:** Add age-based escalation to prevent message starvation
