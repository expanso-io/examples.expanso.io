---
title: Complete Deduplication Pipeline
sidebar_label: Complete Pipeline
sidebar_position: 8
description: The complete event deduplication pipeline
keywords: [complete, deduplication, duplicate, idempotent]
---

import CodeBlock from '@theme/CodeBlock';
import pipelineYaml from '!!raw-loader!../../../examples/data-transformation/deduplicate-events-complete.yaml';

# Complete Pipeline

This pipeline combines all deduplication techniques from this tutorial:

- **Hash-based deduplication** - Use content hash to detect exact duplicates
- **Fingerprint deduplication** - Detect near-duplicates with key field matching
- **ID-based deduplication** - Use event_id for idempotent processing
- **Time-windowed dedup** - Only check for duplicates within time window

## Full Configuration

<CodeBlock language="yaml" title="deduplicate-events.yaml">{pipelineYaml}</CodeBlock>

## Quick Test

```bash
# Send an event
curl -X POST http://localhost:8080/events \
  -H "Content-Type: application/json" \
  -d '{"event_id": "evt_001", "data": "hello"}'

# Send the same event again (will be deduplicated)
curl -X POST http://localhost:8080/events \
  -H "Content-Type: application/json" \
  -d '{"event_id": "evt_001", "data": "hello"}'

# Only 1 event appears in output
```

## Deploy

```bash
# Deploy to Expanso orchestrator
expanso-cli job deploy deduplicate-events.yaml

# Or run locally with expanso-edge
expanso-edge run --config deduplicate-events.yaml
```

## Download

<a href="/examples/data-transformation/deduplicate-events-complete.yaml" download className="button button--primary">
  Download deduplicate-events.yaml
</a>

## What's Next?

- [Troubleshooting](./troubleshooting) - Common issues and solutions
- [Normalize Timestamps](../normalize-timestamps/) - Standardize time formats
