---
title: Complete Timestamp Normalization Pipeline
sidebar_label: Complete Pipeline
sidebar_position: 6
description: The complete timestamp normalization pipeline
keywords: [complete, timestamps, normalization, timezone, utc]
---

import CodeBlock from '@theme/CodeBlock';
import pipelineYaml from '!!raw-loader!../../../examples/data-transformation/normalize-timestamps-complete.yaml';

# Complete Pipeline

This pipeline combines all timestamp normalization techniques from this tutorial:

- **Format detection** - Auto-detect timestamp format (ISO8601, Unix, custom)
- **Timezone conversion** - Convert all timestamps to UTC
- **Derived fields** - Add hour, day_of_week, is_business_hours
- **Validation** - Reject invalid or future timestamps

## Full Configuration

<CodeBlock language="yaml" title="normalize-timestamps.yaml">{pipelineYaml}</CodeBlock>

## Quick Test

```bash
# Send events with different timestamp formats
curl -X POST http://localhost:8080/events \
  -H "Content-Type: application/json" \
  -d '{"event": "test1", "timestamp": "2024-01-15T10:30:00-08:00"}'

curl -X POST http://localhost:8080/events \
  -H "Content-Type: application/json" \
  -d '{"event": "test2", "timestamp": 1705340400}'

curl -X POST http://localhost:8080/events \
  -H "Content-Type: application/json" \
  -d '{"event": "test3", "timestamp": "01/15/2024 10:30 AM PST"}'

# All outputs have normalized UTC timestamps + derived fields
```

## Deploy

```bash
# Deploy to Expanso orchestrator
expanso-cli job deploy normalize-timestamps.yaml

# Or run locally with expanso-edge
expanso-edge run --config normalize-timestamps.yaml
```

## Download

<a href="/examples/data-transformation/normalize-timestamps-complete.yaml" download className="button button--primary">
  Download normalize-timestamps.yaml
</a>

## What's Next?

- [Troubleshooting](./troubleshooting) - Common issues and solutions
- [Parse Logs](../parse-logs/) - Parse different log formats
