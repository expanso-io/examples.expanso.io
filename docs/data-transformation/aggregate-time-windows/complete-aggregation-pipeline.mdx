---
title: Complete Aggregation Pipeline
sidebar_label: Complete Pipeline
sidebar_position: 9
description: The complete time-windowed aggregation pipeline
keywords: [complete, aggregation, time-windows, tumbling, sliding]
---

import CodeBlock from '@theme/CodeBlock';
import pipelineYaml from '!!raw-loader!../../../examples/data-transformation/aggregate-time-windows-complete.yaml';

# Complete Pipeline

This pipeline combines all time-windowed aggregation techniques from this tutorial:

- **Tumbling windows** - Fixed, non-overlapping time buckets (e.g., 5-minute windows)
- **Sliding windows** - Overlapping windows for smoother trends
- **Session windows** - Activity-based grouping with timeouts
- **Multi-level aggregation** - Combine window types for different use cases

## Full Configuration

<CodeBlock language="yaml" title="aggregate-time-windows.yaml">{pipelineYaml}</CodeBlock>

## Quick Test

```bash
# Send sensor readings over time
for i in {1..10}; do
  curl -X POST http://localhost:8080/sensors \
    -H "Content-Type: application/json" \
    -d "{
      \"sensor_id\": \"temp-001\",
      \"temperature\": $((70 + RANDOM % 10)),
      \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\"
    }"
  sleep 1
done

# Wait for window to close, then check aggregated output
```

## Deploy

```bash
# Deploy to Expanso orchestrator
expanso-cli job deploy aggregate-time-windows.yaml

# Or run locally with expanso-edge
expanso-edge run --config aggregate-time-windows.yaml
```

## Download

<a href="/examples/data-transformation/aggregate-time-windows-complete.yaml" download className="button button--primary">
  Download aggregate-time-windows.yaml
</a>

## What's Next?

- [Troubleshooting](./troubleshooting) - Common issues and solutions
- [Deduplicate Events](../deduplicate-events/) - Remove duplicate messages
