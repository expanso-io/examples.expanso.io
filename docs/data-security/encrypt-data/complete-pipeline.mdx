---
title: Complete Field Encryption Pipeline
sidebar_label: Complete Pipeline
sidebar_position: 10
description: The complete field encryption pipeline for sensitive data protection
keywords: [complete, encryption, pci-dss, gdpr]
---

import CodeBlock from '@theme/CodeBlock';
import pipelineYaml from '!!raw-loader!../../../examples/data-security/encrypt-data-complete.yaml';

# Complete Pipeline

This pipeline combines all field encryption techniques from this tutorial:

- **Credit card encryption** - AES-256-GCM encryption, preserve last 4 digits
- **PII encryption** - Encrypt emails, SSNs while preserving domain/last-4
- **Address encryption** - Encrypt street, preserve city/state/ZIP prefix
- **Audit metadata** - Track encryption timestamp, key version

## Full Configuration

<CodeBlock language="yaml" title="encrypt-data.yaml">{pipelineYaml}</CodeBlock>

## Quick Test

```bash
# Send data with sensitive fields
curl -X POST http://localhost:8080/transactions \
  -H "Content-Type: application/json" \
  -d '{
    "transaction_id": "txn_001",
    "card_number": "4532123456789010",
    "email": "john.doe@example.com",
    "ssn": "123-45-6789",
    "address": {
      "street": "123 Main St",
      "city": "San Francisco",
      "state": "CA",
      "zip": "94102"
    }
  }'

# Output: card_number → encrypted, email → encrypted, ssn → encrypted
# Analytics-safe fields preserved: last_four, domain, city, state, zip_prefix
```

## Deploy

```bash
# Deploy to Expanso orchestrator
expanso-cli job deploy encrypt-data.yaml

# Or run locally with expanso-edge
expanso-edge run --config encrypt-data.yaml
```

## Download

<a href="/examples/data-security/encrypt-data-complete.yaml" download className="button button--primary">
  Download encrypt-data.yaml
</a>

## What's Next?

- [Troubleshooting](./troubleshooting) - Common issues and solutions
- [Encryption Patterns](../encryption-patterns/) - Advanced encryption strategies
