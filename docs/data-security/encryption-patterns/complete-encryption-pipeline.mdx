---
title: Complete Field-Level Encryption Pipeline
sidebar_label: Complete Pipeline
sidebar_position: 10
description: The complete field-level encryption pipeline with multi-key management
keywords: [complete, encryption, multi-key, compliance]
---

import CodeBlock from '@theme/CodeBlock';
import pipelineYaml from '!!raw-loader!../../../examples/data-security/encryption-patterns-complete.yaml';
import CopyPipelineButton from '@site/src/components/CopyPipelineButton';

# Complete Pipeline

<CopyPipelineButton pipeline={pipelineYaml} />

This pipeline combines all encryption patterns from this tutorial:

- **Payment encryption** - Card numbers, CVV with 90-day key rotation
- **PII encryption** - Emails, phones, SSNs with 180-day rotation
- **Address encryption** - Streets, detailed ZIPs with 365-day rotation
- **Temporal encryption** - Birth dates with age-range preservation
- **Multi-key architecture** - Risk-based key tiers for breach containment

## Full Configuration

<CodeBlock language="yaml" title="encryption-patterns.yaml">{pipelineYaml}</CodeBlock>

## Quick Test

```bash
# Send transaction with multiple sensitive field types
curl -X POST http://localhost:8080/transactions \
  -H "Content-Type: application/json" \
  -d '{
    "transaction_id": "txn_001",
    "card_number": "4532123456789010",
    "cvv": "123",
    "email": "john.doe@example.com",
    "phone": "415-555-1234",
    "ssn": "123-45-6789",
    "birth_date": "1985-03-15",
    "address": {
      "street": "123 Main St",
      "city": "San Francisco",
      "state": "CA",
      "zip": "94102"
    }
  }'

# Each field type encrypted with its appropriate key tier
# Analytics-safe summaries preserved (last_four, domain, age_range, etc.)
```

## Deploy

```bash
# Deploy to Expanso orchestrator
expanso-cli job deploy encryption-patterns.yaml

# Or run locally with expanso-edge
expanso-edge run --config encryption-patterns.yaml
```

## Download

<a href="/examples/data-security/encryption-patterns-complete.yaml" download className="button button--primary">
  Download encryption-patterns.yaml
</a>

## What's Next?

- [Troubleshooting](./troubleshooting) - Common issues and solutions
- [Enforce Schema](../enforce-schema/) - Validate data structure
