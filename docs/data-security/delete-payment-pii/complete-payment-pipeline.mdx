---
title: Complete Payment PII Deletion Pipeline
sidebar_label: Complete Pipeline
sidebar_position: 6
description: The complete payment PII deletion pipeline for PCI-DSS compliance
keywords: [complete, payment, pii-deletion, pci-dss]
---

import CodeBlock from '@theme/CodeBlock';
import pipelineYaml from '!!raw-loader!../../../examples/data-security/delete-payment-pii-complete.yaml';

# Complete Pipeline

This pipeline combines all payment PII deletion techniques from this tutorial:

- **Delete card numbers** - Remove full credit card numbers, keep last 4 digits
- **Delete expiry dates** - Remove CVV, expiry dates
- **Add audit metadata** - Track what was removed and when
- **Compliance-ready** - PCI-DSS compliant output

## Full Configuration

<CodeBlock language="yaml" title="delete-payment-pii.yaml">{pipelineYaml}</CodeBlock>

## Quick Test

```bash
# Send a payment event with PII
curl -X POST http://localhost:8080/payments \
  -H "Content-Type: application/json" \
  -d '{
    "transaction_id": "txn_001",
    "amount": 99.99,
    "payment_method": {
      "full_number": "4532-1234-5678-9010",
      "expiry": "12/25",
      "cvv": "123"
    },
    "customer": {"name": "John Doe"}
  }'

# Output: full_number â†’ last_four only, cvv/expiry deleted
```

## Deploy

```bash
# Deploy to Expanso orchestrator
expanso-cli job deploy delete-payment-pii.yaml

# Or run locally with expanso-edge
expanso-edge run --config delete-payment-pii.yaml
```

## Download

<a href="/examples/data-security/delete-payment-pii-complete.yaml" download className="button button--primary">
  Download delete-payment-pii.yaml
</a>

## What's Next?

- [Troubleshooting](./troubleshooting) - Common issues and solutions
- [Remove PII](../remove-pii/) - Remove personal data (names, emails, IPs)
