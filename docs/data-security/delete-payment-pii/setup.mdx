---
title: Setup Environment for Payment PII Deletion
sidebar_label: Setup
sidebar_position: 2
description: Configure environment and sample payment data for PII deletion.
keywords: [setup, environment, payment-data, pci-dss, configuration, deployment]
---

# Setup Environment for Payment PII Deletion

Before building the payment PII deletion pipeline, you'll set up sample payment data and configure your environment.

## Prerequisites

This example requires the following services to be running:

*   **[Kafka](/getting-started/services/kafka)**

Before you begin, please ensure these services are set up and running according to their respective guides. Additionally, ensure you have completed the [Local Development Setup](/getting-started/local-development) guide for general environment configuration.

## Step 1: Create Sample Payment Data

Create realistic sample payment events that contain the PII we need to remove:

```bash
# Create project directory
mkdir -p ~/expanso-payment-pii
cd ~/expanso-payment-pii

# Create sample payment events
cat > sample-payments.json << 'EOF'
{
  "event_type": "purchase",
  "transaction_id": "txn_001",
  "timestamp": "2024-12-15T14:30:00Z",
  "amount": 89.99,
  "currency": "USD",
  "merchant": {
    "id": "merchant_123",
    "name": "Coffee Shop Downtown",
    "category": "food_beverage"
  },
  "payment_method": {
    "full_number": "4532-1234-5678-9010",
    "expiry": "12/25", 
    "cvv": "123",
    "type": "credit_card",
    "brand": "visa",
    "last_four": "9010"
  },
  "customer": {
    "id": "cust_456",
    "email": "sarah@example.com"
  }
}
{
  "event_type": "purchase", 
  "transaction_id": "txn_002",
  "timestamp": "2024-12-15T14:32:15Z",
  "amount": 24.50,
  "currency": "USD",
  "merchant": {
    "id": "merchant_789",
    "name": "Gas Station Express",
    "category": "automotive"
  },
  "payment_method": {
    "full_number": "5555-4444-3333-2222",
    "expiry": "09/26",
    "cvv": "456", 
    "type": "credit_card",
    "brand": "mastercard",
    "last_four": "2222"
  },
  "customer": {
    "id": "cust_789",
    "email": "mike@example.com"
  }
}
{
  "event_type": "purchase",
  "transaction_id": "txn_003", 
  "timestamp": "2024-12-15T14:35:42Z",
  "amount": 156.78,
  "currency": "USD",
  "merchant": {
    "id": "merchant_456",
    "name": "Electronics Depot",
    "category": "electronics"
  },
  "payment_method": {
    "full_number": "3782-822463-10005",
    "expiry": "07/24",
    "cvv": "7373",
    "type": "credit_card", 
    "brand": "amex",
    "last_four": "0005"
  },
  "customer": {
    "id": "cust_123", 
    "email": "alex@example.com"
  }
}
EOF
```

This sample data contains:
- âœ… **Safe fields:** transaction_id, amount, currency, merchant info, last_four
- âŒ **High-risk PII:** full_number, expiry, cvv (violate PCI-DSS)
- ðŸŸ¡ **Moderate PII:** customer email (not payment-specific)

## Step 2: Verify Payment Data Structure

Before proceeding, let's examine what PII fields are present in our sample data:

```bash
# Extract just the payment_method fields to see what we're working with
cat sample-payments.json | jq '.payment_method'
```

**Expected output:**
```json
{
  "full_number": "4532-1234-5678-9010",
  "expiry": "12/25",
  "cvv": "123", 
  "type": "credit_card",
  "brand": "visa",
  "last_four": "9010"
}
{
  "full_number": "5555-4444-3333-2222", 
  "expiry": "09/26",
  "cvv": "456",
  "type": "credit_card",
  "brand": "mastercard", 
  "last_four": "2222"
}
{
  "full_number": "3782-822463-10005",
  "expiry": "07/24", 
  "cvv": "7373",
  "type": "credit_card",
  "brand": "amex",
  "last_four": "0005"
}
```

Perfect! This shows us exactly what we need to remove:
- âŒ `full_number` - Primary Account Number (PAN), highest risk
- âŒ `expiry` - Cardholder data, moderate risk  
- âŒ `cvv` - Sensitive authentication data, highest risk
- âœ… `type`, `brand`, `last_four` - Safe for analytics

---

## Next Steps

Your environment is ready! Now you'll learn to identify which payment fields require PCI-DSS controls and which are safe to keep for analytics.

<div style={{display: 'flex', gap: '1.5rem', marginTop: '2rem', marginBottom: '3rem', flexWrap: 'wrap', justifyContent: 'flex-start'}}>
  <a href="./step-1-identify-payment-pii" className="button button--primary button--lg" style={{display: 'inline-flex', alignItems: 'center', justifyContent: 'center', textDecoration: 'none', borderRadius: '8px', padding: '1rem 2rem', fontWeight: '600', minWidth: '240px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)', cursor: 'pointer', transition: 'all 0.2s ease'}}>
    Step 1: Identify Payment PII
  </a>
  <a href="../" className="button button--secondary button--lg" style={{display: 'inline-flex', alignItems: 'center', justifyContent: 'center', textDecoration: 'none', borderRadius: '8px', padding: '1rem 2rem', fontWeight: '600', minWidth: '240px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)', cursor: 'pointer', transition: 'all 0.2s ease'}}>
    Back to Introduction
  </a>
</div>
